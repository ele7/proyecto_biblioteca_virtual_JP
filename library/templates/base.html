<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}Biblioteca Admin{% endblock %}</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"
    />
    {% block extra_css %}{% endblock %}
  </head>

  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      {% if user.is_authenticated %}
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#"
              ><i class="fas fa-bars"></i
            ></a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
            <a href="{% url 'dashboard' %}" class="nav-link">Dashboard</a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a href="{% url 'logout' %}" class="nav-link">Cerrar sesión</a>
          </li>
        </ul>
      </nav>

      <!-- Sidebar -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <a href="#" class="brand-link">
          <span class="brand-text font-weight-light">Biblioteca</span>
        </a>
        <div class="sidebar">
          <nav class="mt-2">
            <ul
              class="nav nav-pills nav-sidebar flex-column"
              data-widget="treeview"
            >
              <li class="nav-item">
                <a href="{% url 'dashboard' %}" class="nav-link">
                  <i class="nav-icon fas fa-tachometer-alt"></i>
                  <p>Dashboard</p>
                </a>
              </li>

              <!-- Registro Maestro -->
              <li class="nav-item has-treeview">
                <a href="#" class="nav-link">
                  <i class="nav-icon fas fa-database"></i>
                  <p>
                    Registro Maestro <i class="right fas fa-angle-left"></i>
                  </p>
                </a>

                <!-- Usuarios -->
                <ul class="nav nav-treeview">
                  <li class="nav-item has-treeview">
                    <a href="#" class="nav-link">
                      <i class="fas fa-users nav-icon"></i>
                      <p>Usuarios <i class="right fas fa-angle-left"></i></p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="{% url 'usuarios_listar' %}" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Listado de Usuarios</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="{% url 'usuarios_crear' %}" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Crear Usuario</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="{% url 'usuarios_listar' %}" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Modificar Usuario</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                </ul>

                <!-- Libros -->
                <ul class="nav nav-treeview">
                  <li class="nav-item has-treeview">
                    <a href="#" class="nav-link">
                      <i class="fas fa-book nav-icon"></i>
                      <p>Libros <i class="right fas fa-angle-left"></i></p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a
                          href="{% url 'categorias_listar' %}"
                          class="nav-link"
                        >
                          <i class="far fa-circle nav-icon"></i>
                          <p>Listado de Categorias</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="{% url 'categorias_crear' %}" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Crear Categoria</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a
                          href="{% url 'categorias_listar' %}"
                          class="nav-link"
                        >
                          <i class="far fa-circle nav-icon"></i>
                          <p>Modificar Categoria</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
      </aside>

      <!-- Content Wrapper -->
      <div class="content-wrapper">
        <section class="content pt-3">
          <div class="container-fluid">{% block content %}{% endblock %}</div>
        </section>
      </div>

      <footer class="main-footer">
        <strong>&copy; 2025 Biblioteca Digital.</strong> Todos los derechos
        reservados.
      </footer>

      {% else %}
      <!-- Página de login centrada -->
      {% comment %}
      <div class="login-box">
        <div class="login-logo">
          <a href="#"><b>Biblioteca</b> Digital</a>
        </div>
        <div class="card">
          <div class="card-body login-card-body">
            {% block content %}{% endblock %}
          </div>
        </div>
      </div>
      {% endcomment %} {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
    {% block scripts %}{% endblock %}
  </body>
</html>
