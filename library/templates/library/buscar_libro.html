{% extends "base.html" %} {% load static %}
<!---->
{% block title %}Buscar Libros{% endblock %}
<!---->
{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h1>Buscar Libros</h1>

      <!-- Formulario de búsqueda -->
      <form method="GET" class="mb-4">
        <div class="input-group">
          <input
            type="search"
            name="q"
            class="form-control"
            placeholder="Buscar libro por título o autor..."
            value="{{ query }}"
            aria-label="Buscar"
          />
          <button class="btn btn-success" type="submit">
            <i class="fas fa-search me-1"></i>Buscar
          </button>
        </div>
      </form>

      <!-- Resultados -->
      {% if query %}
      <div class="alert alert-info">
        {% if resultados_count > 0 %} Se encontraron {{ resultados_count }}
        resultado{{ resultados_count|pluralize }} para "{{ query }}" {% else %}
        No se encontraron resultados para "{{ query }}" {% endif %}
      </div>

      {% if resultados_count > 0 %}
      <div class="row">
        {% for libro in libros %}
        <div class="col-md-4 col-lg-3 mb-4">
          <a
            href="{% url 'library:detalle_libros' libro.id %}"
            class="text-decoration-none"
          >
            <div class="card h-100 shadow-sm libro-card-categoria">
              {% if libro.portada %}
              <img
                src="{{ libro.portada.url }}"
                class="card-img-top libro-imagen-categoria"
                alt="{{ libro.titulo }}"
              />
              {% else %}
              <div class="card-img-top libro-imagen-placeholder-categoria">
                <i class="fas fa-book fa-3x"></i>
              </div>
              {% endif %}
              <div class="card-body d-flex flex-column">
                <h5 class="card-title text-dark libro-titulo-categoria">
                  {{ libro.titulo }}
                </h5>
                <p class="card-text text-muted libro-autor-categoria">
                  <small>{{ libro.autor }}</small>
                </p>
                <p class="card-text libro-año-categoria mt-auto">
                  <small class="text-muted">{{ libro.año }}</small>
                </p>
              </div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
      {% endif %} {% endif %}
    </div>
  </div>
</div>
{% endblock %}
